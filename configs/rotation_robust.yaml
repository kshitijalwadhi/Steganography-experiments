# Data Configuration
data:
  root_dir: ./data
  cover_dataset: CIFAR10
  secret_type: image  # Switch to image secrets
  secret_dataset: MNIST # Specify MNIST as the source
  image_folder_cover: null
  image_folder_secret: null # Not used when secret_dataset is MNIST
  image_size: 64
  num_workers: 4
  # secret_length: 10 # For reference, not needed by dataloader directly

# Model Configuration
model:
  prep_out_channels: 32
  # This should match 3 (cover) + prep_out_channels (32) = 35
  hide_in_channels: 35  
  # reveal_out_channels is set dynamically in models.py based on secret_in_c
  # reveal_out_channels: 1  # 1 for grayscale MNIST secret

# Training Configuration
training:
  batch_size: 32
  epochs: 1
  lr: 1e-4
  lam_hide: 0.75  # Weight for hiding loss (MSE)
  lam_reveal: 1.0  # Weight for reveal loss (MSE for images, applied to aligned secret)
  checkpoint_dir: ./outputs/checkpoints/rotation-robust-mnist
  checkpoint_freq: 5  # Save every N epochs
  val_freq: 1  # Validate every N epochs
  device: auto  # Options: auto, cuda, cpu
  wandb:
    enabled: true
    project: "deep-steganography-rotation"
    entity: null # Your wandb username or team name
    run_name: "rotation-robust-mnist-inv-v1"

# Rotation Training Configuration
rotation:
  enabled: true
  # Probability of applying each rotation during training
  probs: [0.25, 0.25, 0.25, 0.25]  # [0째, 90째, 180째, 270째]
  rotation_angles: [0, 90, 180, 270]
  prob: 0.5 # Probability of applying rotation transformation

# Translation Training Configuration
translation:
  enabled: true
  # Max translation shift as a fraction of image size (e.g., 0.1 means +/- 10% shift)
  max_shift_fraction: 0.125 # E.g. +/- 8 pixels for 64x64
  # Probability of applying translation during training (independent of others)
  prob: 0.5

# Scaling Training Configuration
scaling:
  enabled: true
  # Min/Max scaling factor (1.0 means no scaling)
  min_scale_factor: 0.9
  max_scale_factor: 1.1
  # Probability of applying scaling during training (independent of others)
  prob: 0.5

# Evaluation Configuration
evaluation:
  batch_size: 32
  # Metrics: psnr/ssim compare cover and stego
  # secret_mse_aligned will be calculated in the test script
  metrics: [psnr, ssim] 

# Embedding/Extraction Configuration
embed:
  cover_image: null
  secret_image: null # Will use MNIST for testing if needed
  output_image: ./outputs/stego_rotation_robust_mnist.png
  # Checkpoint path used by test_rotation and experiment_rotation modes
  checkpoint_path: ./outputs/checkpoints/rotation-robust-mnist/best_checkpoint.pth 

extract:
  stego_image: null
  output_secret: ./outputs/revealed_secret_rotation_robust_mnist.png
  checkpoint_path: ./outputs/checkpoints/rotation-robust-mnist/best_checkpoint.pth 